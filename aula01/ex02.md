# Exercício 2: Modelagem e Consulta de Banco de Dados SQL com PostgreSQL

Este exercício demonstra a criação e manipulação de um banco de dados relacional simples para gerenciar produtos e suas respectivas categorias. O objetivo do exercício é praticar os conceitos fundamentais da linguagem SQL, incluindo a criação de tabelas (DDL), inserção de dados (DML) e a realização de consultas para extrair informações.

## Tecnologias Utilizadas
* **Banco de Dados:** PostgreSQL
* **Cliente SQL:** pgAdmin 4

---

## Estrutura do Banco de Dados

O banco de dados consiste em duas tabelas relacionadas: `categoria` e `produtos`. A relação é de **"um para muitos" (1-N)**, onde uma categoria pode conter muitos produtos, mas cada produto pertence a apenas uma categoria.

### Tabela: `categoria`
Armazena as categorias disponíveis para os produtos.

| Coluna              | Tipo de Dado      | Descrição                                         |
| ------------------- | ----------------- | ------------------------------------------------- |
| `categoria_id`      | `SERIAL`          | **Chave Primária (PK)**. Identificador único e automático. |
| `nome_da_categoria` | `VARCHAR(50)`     | O nome da categoria (ex: 'alimentos', 'limpeza'). |

### Tabela: `produtos`
Armazena os detalhes de cada produto individual.

| Coluna                | Tipo de Dado      | Descrição                                                       |
| --------------------- | ----------------- | --------------------------------------------------------------- |
| `p_id`                | `SERIAL`          | **Chave Primária (PK)**. Identificador único e automático.      |
| `p_nome`              | `VARCHAR(100)`    | Nome do produto.                                                |
| `p_peso_g`            | `INTEGER`         | Peso do produto em gramas.                                      |
| `p_largura_cm`        | `NUMERIC(10, 2)`  | Largura do produto em centímetros.                              |
| `p_altura_cm`         | `NUMERIC(10, 2)`  | Altura do produto em centímetros.                               |
| `p_profundidade_cm`   | `NUMERIC(10, 2)`  | Profundidade do produto em centímetros.                         |
| `p_marca`             | `VARCHAR(50)`     | Marca do produto.                                               |
| `p_descricao`         | `TEXT`            | Descrição detalhada do produto.                                 |
| `p_preco`             | `NUMERIC(10, 2)`  | Preço de venda do produto.                                      |
| `qtd_estoque`         | `INTEGER`         | Quantidade de unidades disponíveis em estoque.                  |
| `categoria_id`        | `INTEGER`         | **Chave Estrangeira (FK)**. Refere-se a `categoria(categoria_id)`. |

---

## Script SQL Completo
O arquivo `.sql` contém todo o código necessário para resetar, criar, popular e consultar o banco de dados. Este é o código final e funcional.

```sql


-- SEÇÃO 1: CRIAÇÃO DAS TABELAS

CREATE TABLE categoria (
    categoria_id SERIAL PRIMARY KEY,
    nome_da_categoria VARCHAR(50) NOT NULL
);

CREATE TABLE produtos (
    p_id SERIAL PRIMARY KEY,
    p_nome VARCHAR(100) NOT NULL,
    p_peso_g INTEGER,
    p_largura_cm NUMERIC(10, 2),
    p_altura_cm NUMERIC(10, 2),
    p_profundidade_cm NUMERIC(10, 2),
    p_marca VARCHAR(50), 
    p_descricao TEXT,
    p_preco NUMERIC(10, 2) NOT NULL,
    qtd_estoque INTEGER NOT NULL DEFAULT 0,
    categoria_id INTEGER, 
    FOREIGN KEY (categoria_id) REFERENCES categoria (categoria_id)
);


-- SEÇÃO 2: INSERÇÃO DE DADOS

INSERT INTO categoria (nome_da_categoria)
VALUES 
    ('alimentos'),
    ('bebidas'),
    ('cuidados pessoais'),
    ('limpeza'),
    ('utensilios'),
    ('eletrodomesticos');

INSERT INTO produtos (p_nome, p_peso_g, p_preco, qtd_estoque, p_marca, p_descricao, categoria_id)
VALUES 
    ('Espaguete Sêmola Galo', 1000, 4.69, 123, 'Galo', 'O Espaguete Sêmola da Galo é um macarrão...', 1),
    ('Refrigerante Coca-cola 2L', 2000, 9.89, 89, 'Coca-Cola', 'A Coca-Cola é um refrigerante não alcoólico...', 2),
    ('Loção Deo-hidratante Nivea', 200, 17.31, 55, 'Nivea', 'A Loção Deo-hidratante Nivea Body Milk...', 3),
    ('Desinfetante Pinho Sol 500ml', 500, 8.29, 73, 'Pinho Sol', 'O Desinfetante Pinho Sol é um produto de uso geral...', 4),
    ('Saleiro Branco 1kg Plasutil', 290, 9.93, 26, 'Plasutil', 'O Saleiro de plástico da marca Plasútil...', 5);


-- SEÇÃO 3: CONSULTAS


```

---

## Execução e Resultados das Consultas

A seguir estão as 5 consultas realizadas para cumprir os requisitos do exercício, juntamente com seus respectivos resultados.

### Consulta 1: Filtrar por Preço (`WHERE`)
* **Objetivo:** Encontrar todos os produtos cujo preço é maior que R$ 9,00.
* **Código SQL:**
    ```sql
    SELECT * FROM produtos 
    WHERE p_preco > 9.00;
    ```
* **Resultado:**

    ![Filtro por preço](aula01/imgs/whereconsulta01.png)

### Consulta 2: Filtrar por Texto (`WHERE`)
* **Objetivo:** Encontrar todos os produtos que são da marca 'Galo'.
* **Código SQL:**
    ```sql
    SELECT * FROM produtos 
    WHERE p_marca = 'Galo';
    ```
* **Resultado:**

    ![Filtro por marca](aula01/imgs/whereconsulta02.png)

### Consulta 3: Filtrar com Múltiplas Condições (`WHERE ... AND`)
* **Objetivo:** Encontrar os produtos de limpeza (ID 4) que têm mais de 70 unidades em estoque.
* **Código SQL:**
    ```sql
    SELECT * FROM produtos 
    WHERE categoria_id = 4 AND qtd_estoque > 70;
    ```
* **Resultado:**

    ![Filtro por categoria e estoque](aula01/imgs/whereconsulta03.png)

### Consulta 4: Ordenar Resultados (`ORDER BY`)
* **Objetivo:** Listar todos os produtos da loja em ordem alfabética.
* **Código SQL:**
    ```sql
    SELECT 
        p_nome,
        p_marca,
        p_preco
    FROM 
        produtos
    ORDER BY 
        p_nome ASC;
    ```
* **Resultado:**

    ![Resultado da Consulta 4](aula01/imgs/orderbyconsulta.png)

### Consulta 5: Combinar Tabelas (`JOIN`)
* **Objetivo:** Criar um relatório que mostre o nome do produto e, ao lado, o nome legível da sua categoria.
* **Código SQL:**
    ```sql
    SELECT 
        p.p_nome AS "Produto", 
        c.nome_da_categoria AS "Categoria"
    FROM 
        produtos AS p
    JOIN 
        categoria AS c ON p.categoria_id = c.categoria_id;
    ```
* **Resultado:**

    ![Resultado da Consulta 5](aula01/imgs/joinconsulta.png)

---

## Conclusão
Esse projeto foi uma jornada completa em SQL! Comecei definindo a estrutura das tabelas produtos e categoria, com suas chaves primárias e estrangeiras. Depois que as tabelas foram criadas, populei o banco com os dados de cada item. A parte mais desafiadora (e onde mais aprendi) foi a de 'debugar' o código, corrigindo erro por erro até tudo funcionar perfeitamente. No final, consegui fazer as consultas que a tarefa pedia, aprendendo na prática a filtrar (WHERE), ordenar (ORDER BY) e, principalmente, a conectar as tabelas com JOIN para criar relatórios que realmente fazem sentido. Missão cumprida! ✅

---

